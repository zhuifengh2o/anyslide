jQuery.fn.slideFocus=function(a,b,c){function N(){var b,a="<div class='switcherBg'></div><div class='switcher'>";if("up"==s||"down"==s)for(b=0;E>b;b++)a+="<span>"+(b+1)+"</span>";else for(b=0;D>b;b++)a+="<span>"+(b+1)+"</span>";a+="</div>",d.append(a)}function P(a){O.children().eq(a).addClass("on").siblings().removeClass("on")}function Q(){var a="<a class='prev' href='javascript:;'>上一个</a><a class='next' href='javascript:;'>下一个</a>";d.append(a)}function U(){for(i=0;F>i;i++)T[i]=f.children().eq(i).find("textarea")?f.children().eq(i).find("textarea").text():""}function V(){for(i=0;B>i;i++)f.children().eq(i).find("textarea").replaceWith(T[i])}function W(){for(i=0;F>i;i++)f.children().eq(F-1-i).find("textarea").replaceWith(T[i])}function Y(a){var b=0;for(b=B*(a+1),i=0;b>i;i++)f.children().eq(i).find("textarea").replaceWith(T[i]);f.stop(!1,!0).animate({left:-H*a},q),P(a)}function Z(a){var b=0;for(b=C*(a+1),i=0;b>i;i++)f.children().eq(i).find("textarea").replaceWith(T[i]);f.stop(!1,!0).animate({top:-I*a},q),P(a)}function _(a){function c(){f.children().eq(numfastSlide+j).css("display","block")}function d(){f.children().eq(numfastSlide+j).fadeIn()}var b=0;for(b=B*(a+1),i=0;b>i;i++)f.children().eq(i).find("textarea").replaceWith(T[i]);for(f.children().css("display","none"),numfastSlide=B*a,j=0;B>j;j++)w>0?d(w):c();P(a)}function ab(a){function c(){f.children().eq(numfastSlide+j).css("display","block")}function d(){f.children().eq(numfastSlide+j).fadeIn()}var b=0;for(b=C*(a+1),i=0;b>i;i++)f.children().eq(i).find("textarea").replaceWith(T[i]);for(f.children().css("display","none"),numfastSlide=C*a,j=0;C>j;j++)w>0?d(w):c();P(a)}function bb(){"mouseenter"==n?O.children().mouseenter(function(){k=$(this).index(),_(k)}):O.children().click(function(){k=$(this).index(),_(k)})}function cb(){"mouseenter"==n?O.children().mouseenter(function(){k=$(this).index(),Y(k)}):O.children().click(function(){k=$(this).index(),Y(k)})}function db(){"mouseenter"==n?O.children().mouseenter(function(){k=$(this).index(),Z(k)}):O.children().click(function(){k=$(this).index(),Z(k)})}function eb(){for(i=0;B>i;i++)f.append(f.children().eq(i).clone());f.stop(!1,!0).animate({left:-H*D},q,function(){for(f.css("left","0"),i=0;B>i;i++)f.children().last().remove()}),P(k)}function fb(){for(i=0;C>i;i++)f.append(f.children().eq(i).clone());f.stop(!1,!0).animate({top:-I*E},q,function(){for(f.css("top","0"),i=0;C>i;i++)f.children().last().remove()}),P(k)}function gb(){for(W(),i=0;B>i;i++)f.prepend(f.children().last());f.css("left",1*-H),f.stop(!1,!0).animate({left:0},q,function(){for(f.css("left",-H*(D-1)),i=0;B>i;i++)f.append(f.children().first())}),P(k)}function hb(){for(W(),i=0;C>i;i++)f.prepend(f.children().last());f.css("top",1*-I),f.stop(!1,!0).animate({top:0},q,function(){for(f.css("top",-I*(E-1)),i=0;C>i;i++)f.append(f.children().first())}),P(k)}function ib(){if(k++,"up"==s||"down"==s)if(E>k)ab(k);else{if(b)return b(),k=D-1,!1;ab(0),k=0}else if(D>k)_(k);else{if(b)return b(),k=D-1,!1;_(0),k=0}}function jb(){if(k--,"up"==s||"down"==s)if(k>-1)ab(k);else{if(c)return c(),k=0,!1;ab(E-1),k=E-1}else if(k>-1)_(k);else{if(c)return c(),k=0,!1;_(D-1),k=D-1}}function kb(){if(t){if(!f.is(":animated"))if(k--,k>-1)Y(k);else{if(c)return c(),k=0,!1;k=D-1,gb()}}else if(k--,k>-1)Y(k);else{if(c)return c(),k=0,!1;k=D-1,gb()}}function lb(){if(t){if(!f.is(":animated"))if(k--,k>-1)Z(k);else{if(c)return c(),k=0,!1;k=E-1,hb()}}else if(k--,k>-1)Z(k);else{if(c)return c(),k=0,!1;k=E-1,hb()}}function mb(){if(t){if(!f.is(":animated"))if(k++,D>k)Y(k);else{if(b)return b(),k=D-1,!1;k=0,eb()}}else if(k++,D>k)Y(k);else{if(b)return b(),k=D-1,!1;k=0,eb()}}function nb(){if(t){if(!f.is(":animated"))if(k++,E>k)Z(k);else{if(b)return b(),k=D-1,!1;k=0,fb()}}else if(k++,E>k)Z(k);else{if(b)return b(),k=D-1,!1;k=0,fb()}}function ob(){d.hover(function(){clearInterval(l)},function(){l=setInterval(function(){if(k--,0>k){if(c)return c(),k=0,!1;k=D,_(D-1)}else _(k)},p)}).trigger("mouseleave")}function pb(){d.hover(function(){clearInterval(l)},function(){l=setInterval(function(){if(k--,0>k){if(c)return c(),k=0,!1;k=E-1,ab(E-1)}else ab(k)},p)}).trigger("mouseleave")}function qb(){d.hover(function(){clearInterval(l)},function(){l=setInterval(function(){if(k++,k>D-1){if(b)return b(),k=D-1,!1;k=0,_(0)}else _(k)},p)}).trigger("mouseleave")}function rb(){d.hover(function(){clearInterval(l)},function(){l=setInterval(function(){if(k++,k>E-1){if(b)return b(),k=D-1,!1;k=0,ab(0)}else ab(k)},p)}).trigger("mouseleave")}function sb(){d.hover(function(){clearInterval(l)},function(){l=setInterval(function(){if(k--,0>k){if(c)return c(),k=0,!1;k=D-1,gb()}else Y(k)},p)}).trigger("mouseleave")}function tb(){d.hover(function(){clearInterval(l)},function(){l=setInterval(function(){if(k--,0>k){if(c)return c(),k=0,!1;k=E-1,hb()}else Z(k)},p)}).trigger("mouseleave")}function ub(){d.hover(function(){clearInterval(l)},function(){l=setInterval(function(){if(k++,k>D-1){if(b)return b(),k=D-1,!1;k=0,eb()}else Y(k)},p)}).trigger("mouseleave")}function vb(){d.hover(function(){clearInterval(l)},function(){l=setInterval(function(){if(k++,k>E-1){if(b)return b(),k=D-1,!1;k=0,fb()}else Z(k)},p)}).trigger("mouseleave")}var l,O,R,S,T,d=$(this),e=d.children().eq(0),f=e.children().eq(0),g=f.children().eq(0),h=f.children().length,k=0,m=a.hover,n=a.switchMethod,o=a.autoPlay,p=a.offset+a.last,q=a.last,r=a.slideFast,s=a.direction,t=a.smooth,u=a.addNpBtn,v=a.addSwitchBtn,w=a.fadeIn,x=g.width(),y=g.height(),z=e.width(),A=e.height(),B=Math.floor(z/x),C=Math.floor(A/y)*B,D=Math.ceil(h/B),E=Math.ceil(h/C),F=D*B,H=x*B,I=y*C/B,J=H*(D+2),K=I*(E+2),L=D*B-h,M=E*C-h;if("up"==s||"down"==s)for(f.css("height",K),i=0;M>i;i++)f.append(g.clone()),f.children().last().html("&nbsp");else{for(i=0;L>i;i++)f.append(g.clone()),f.children().last().html("&nbsp");f.css("width",J)}return d.has(".switcher").length||(v?N():function(){}),O=d.find(".switcher"),O.children().eq(0).addClass("on"),u?Q():function(){},R=d.find(".prev"),S=d.find(".next"),m&&d.hover(function(){e.css("display","block")},function(){e.css("display","none")}),1==D||1==E?!1:(T={},U(),V(),r?bb():r||"up"!=s&&"down"!=s?cb():db(),r?(S.click(function(){ib()}),R.click(function(){jb()})):r||"up"!=s&&"down"!=s?(S.click(function(){mb()}),R.click(function(){kb()})):(S.click(function(){nb()}),R.click(function(){lb()})),o&&r&&"right"==a.direction?(W(),qb()):o&&!r&&"right"==a.direction?(W(),sb()):o&&r&&"down"==a.direction?(W(),pb()):o&&!r&&"down"==a.direction?(W(),tb()):o&&r&&"left"==a.direction?ob():o&&!r&&"left"==a.direction?ub():o&&r&&"up"==a.direction?rb():o&&!r&&"up"==a.direction?vb():o&&!r?sb():o&&r&&qb(),void 0)};
