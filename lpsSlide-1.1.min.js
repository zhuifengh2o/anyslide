jQuery.fn.slideFocus=function(a,b,c){function O(){var b,a="<div class='switcherBg'></div><div class='switcher'>";if("up"==q||"down"==q)for(b=0;E>b;b++)a+="<span>"+(b+1)+"</span>";else for(b=0;D>b;b++)a+="<span>"+(b+1)+"</span>";a+="</div>",d.append(a)}function Q(a){P.children().eq(a).addClass("on").siblings().removeClass("on")}function R(){var a="<a class='prev' href='javascript:;'>上一个</a><a class='next' href='javascript:;'>下一个</a>";d.append(a)}function X(){for(var a=0;W>a;a++)U[a]="undefined"!=typeof V.eq(a).attr("src")&&V.eq(a).attr("src").indexOf("lazyload.gif")<0?V.eq(a).attr("src"):"undefined"!=typeof V.eq(a).attr("url")?V.eq(a).attr("url"):"&nbsp;"}function Y(a){function i(){var a=V.eq(c+h),b=a.attr("url"),d=new Image;d.src=b,d.complete?a.attr("src",b):d.onload=function(){a.attr("src",b)}}var b,c,d,e,g,h;if(u){for(b=0,b=B*a,c=0,d=0;b>d;d++)c+=f.children().eq(d).find("img").length;for(e=0,g=0;B>g;g++)e+=f.children().eq(b+g).find("img").length;for(h=0;e>h;h++)("undefined"==typeof V.eq(c+h).attr("src")||V.eq(c+h).attr("src").indexOf("lazyload.gif")>=0)&&i()}}function Z(a){Y(a),f.stop(!1,!0).animate({left:-H*a},o),Q(a)}function _(a){var b,c;for(Y(a),b=0,b=C*(a+1),c=0;b>c;c++)f.children().eq(c).find("textarea").replaceWith(U[c]);f.stop(!1,!0).animate({top:-I*a},o),Q(a)}function ab(a){function c(){f.children().eq(numfastSlide+b).css("display","block")}function d(a){f.children().eq(numfastSlide+b).fadeIn(a)}function e(a){f.children().eq(numfastSlide+b).slideDown(a)}Y(a),f.children().css("display","none"),numfastSlide=B*a;for(var b=0;B>b;b++)v>0?d(v):w>0?e(w):c();Q(a)}function bb(a){function c(){f.children().eq(numfastSlide+b).css("display","block")}function d(){f.children().eq(numfastSlide+b).fadeIn()}Y(a),f.children().css("display","none"),numfastSlide=C*a;for(var b=0;C>b;b++)v>0?d(v):c();Q(a)}function cb(){"mouseenter"==l?P.children().mouseenter(function(){i=$(this).index(),ab(i)}):P.children().click(function(){i=$(this).index(),ab(i)})}function db(){"mouseenter"==l?P.children().mouseenter(function(){i=$(this).index(),Z(i)}):P.children().click(function(){i=$(this).index(),Z(i)})}function eb(){"mouseenter"==l?P.children().mouseenter(function(){i=$(this).index(),_(i)}):P.children().click(function(){i=$(this).index(),_(i)})}function fb(){for(var a=0;B>a;a++)f.append(f.children().eq(a).clone());f.stop(!1,!0).animate({left:-H*D},o,function(){f.css("left","0");for(var a=0;B>a;a++)f.children().last().remove()}),Q(i)}function gb(){for(var a=0;C>a;a++)f.append(f.children().eq(a).clone());f.stop(!1,!0).animate({top:-I*E},o,function(){f.css("top","0");for(var a=0;C>a;a++)f.children().last().remove()}),Q(i)}function hb(){for(var a=0;B>a;a++)f.prepend(f.children().last());f.css("left",1*-H),f.stop(!1,!0).animate({left:0},o,function(){f.css("left",-H*(D-1));for(var a=0;B>a;a++)f.append(f.children().first())}),Q(i)}function ib(){for(var a=0;C>a;a++)f.prepend(f.children().last());f.css("top",1*-I),f.stop(!1,!0).animate({top:0},o,function(){for(f.css("top",-I*(E-1)),a=0;C>a;a++)f.append(f.children().first())}),Q(i)}function jb(){if(i++,"up"==q||"down"==q)if(E>i)bb(i);else{if(b)return b(),i=D-1,!1;bb(0),i=0}else if(D>i)ab(i);else{if(b)return b(),i=D-1,!1;ab(0),i=0}}function kb(){if(i--,"up"==q||"down"==q)if(i>-1)bb(i);else{if(Y(E-1),c)return c(),i=0,!1;bb(E-1),i=E-1}else if(i>-1)ab(i);else{if(Y(D-1),c)return c(),i=0,!1;ab(D-1),i=D-1}}function lb(){if(r){if(!f.is(":animated"))if(i--,i>-1)Z(i);else{if(Y(D-1),c)return c(),i=0,!1;i=D-1,hb()}}else if(i--,i>-1)Z(i);else{if(Y(D-1),c)return c(),i=0,!1;i=D-1,hb()}}function mb(){if(r){if(!f.is(":animated"))if(i--,i>-1)_(i);else{if(Y(E-1),c)return c(),i=0,!1;i=E-1,ib()}}else if(i--,i>-1)_(i);else{if(Y(E-1),c)return c(),i=0,!1;i=E-1,ib()}}function nb(){if(r){if(!f.is(":animated"))if(i++,D>i)Z(i);else{if(b)return b(),i=D-1,!1;i=0,fb()}}else if(i++,D>i)Z(i);else{if(b)return b(),i=D-1,!1;i=0,fb()}}function ob(){if(r){if(!f.is(":animated"))if(i++,E>i)_(i);else{if(b)return b(),i=D-1,!1;i=0,gb()}}else if(i++,E>i)_(i);else{if(b)return b(),i=D-1,!1;i=0,gb()}}function pb(){d.hover(function(){clearInterval(j)},function(){j=setInterval(function(){if(i--,0>i){if(c)return c(),i=0,!1;i=D,ab(D-1)}else ab(i)},n)}).trigger("mouseleave")}function qb(){d.hover(function(){clearInterval(j)},function(){j=setInterval(function(){if(i--,0>i){if(c)return c(),i=0,!1;i=E-1,bb(E-1)}else bb(i)},n)}).trigger("mouseleave")}function rb(){d.hover(function(){clearInterval(j)},function(){j=setInterval(function(){if(i++,i>D-1){if(b)return b(),i=D-1,!1;i=0,ab(0)}else ab(i)},n)}).trigger("mouseleave")}function sb(){d.hover(function(){clearInterval(j)},function(){j=setInterval(function(){if(i++,i>E-1){if(b)return b(),i=D-1,!1;i=0,bb(0)}else bb(i)},n)}).trigger("mouseleave")}function tb(){d.hover(function(){clearInterval(j)},function(){j=setInterval(function(){if(i--,0>i){if(c)return c(),i=0,!1;i=D-1,hb()}else Z(i)},n)}).trigger("mouseleave")}function ub(){d.hover(function(){clearInterval(j)},function(){j=setInterval(function(){if(i--,0>i){if(c)return c(),i=0,!1;i=E-1,ib()}else _(i)},n)}).trigger("mouseleave")}function vb(){d.hover(function(){clearInterval(j)},function(){j=setInterval(function(){if(i++,i>D-1){if(b)return b(),i=D-1,!1;i=0,fb()}else Z(i)},n)}).trigger("mouseleave")}function wb(){d.hover(function(){clearInterval(j)},function(){j=setInterval(function(){if(i++,i>E-1){if(b)return b(),i=D-1,!1;i=0,gb()}else _(i)},n)}).trigger("mouseleave")}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,H,I,J,K,L,M,N,P,S,T,U,V,W,d=$(this);if(e=d.has(".lpsbd").length?d.find(".lpsbd"):d.children().eq(0),f=e.children().eq(0),g=f.children().eq(0),h=f.children().length,i=0,k=a.hover,l=a.switchMethod,m=a.autoPlay,n=a.offset+a.last,o=a.last,p=a.slideFast,q=a.direction,r=a.smooth,s=a.addNpBtn,t=a.addSwitchBtn,u=a.lazyLoad,v=a.fadeIn,w=a.slideDown,x=g.width(),y=g.height(),z=e.width(),A=e.height(),B=a.numeachpage>0?a.numeachpage:Math.floor(z/x),C=Math.floor(A/y)*B,D=Math.ceil(h/B),E=Math.ceil(h/C),H=x*B,I=y*C/B,J=H*(D+2),K=I*(E+2),L=D*B-h,M=E*C-h,"up"==q||"down"==q)for(f.css("height",K),N=0;M>N;N++)f.append(g.clone()),f.children().last().html("&nbsp");else{for(N=0;L>N;N++)f.append(g.clone()),f.children().last().html("&nbsp");f.css("width",J)}return d.has(".switcher").length||(t?O():function(){}),P=d.find(".switcher"),P.children().eq(0).addClass("on"),s?R():function(){},S=d.find(".prev"),T=d.find(".next"),k&&d.hover(function(){e.css("display","block")},function(){e.css("display","none")}),1==D||1==E?!1:(U={},V=f.find("img"),W=V.length,u&&X(),u&&Y(0),p?cb():p||"up"!=q&&"down"!=q?db():eb(),p?(T.click(function(){jb()}),S.click(function(){kb()})):p||"up"!=q&&"down"!=q?(T.click(function(){nb()}),S.click(function(){lb()})):(T.click(function(){ob()}),S.click(function(){mb()})),m&&p&&"right"==a.direction?(Y(D-1),rb()):m&&!p&&"right"==a.direction?(Y(D-1),tb()):m&&p&&"down"==a.direction?(Y(E-1),qb()):m&&!p&&"down"==a.direction?(Y(E-1),ub()):m&&p&&"left"==a.direction?pb():m&&!p&&"left"==a.direction?vb():m&&p&&"up"==a.direction?sb():m&&!p&&"up"==a.direction?wb():m&&!p?vb():m&&p&&rb(),void 0)};
