!function(a){a.fn.slideFocus=function(b){var h,n,o,q,r,s,t,u,v,w,x,y,z,A,B,C,c=a.extend(!0,{callback:function(){},direction:"left",slide:a(this),slideBox:a(this).children(":first"),hover:!1,autoPlay:{bool:!0,offset:5e3},smooth:!1,addNpBtn:!1,switcher:{obj:"undefined",show:!0,event:"mouseenter"},effect:{type:"none",effect:"slideDown",last:200},lazyLoad:!1,numeachpage:0},b),d=c.slideBox.children(":first"),e=d.children(),f=e.length,g=0,i=e.eq(0).width(),j=e.eq(0).height(),k=c.slideBox.width(),l=c.slideBox.height(),m=!0;for(("up"==c.direction||"down"==c.direction)&&(m=!1),n=c.numeachpage>0?c.numeachpage:m?Math.floor(k/i):Math.floor(l/j)*Math.floor(k/i),o=Math.ceil(f/n),q=m?i*n:j*Math.floor(l/j),r=q*(o+2),s=o*n-f,"none"!=c.effect.type&&(m?d.css("width",r):d.css("height",r)),t=0;s>t;t++)d.append(e.eq(0).clone()),d.children().last().html("&nbsp");if("undefined"==c.switcher.obj){for(u="<div class='switcher'>",t=0;o>t;t++)u+="<span>"+(t+1)+"</span>";u+="</div>",v=a(u).appendTo(c.slide)}else v=c.switcher.obj;return c.switcher.show||v.css("display","none"),w=v.children(),x=function(a){c.callback(a,o),a>o-1&&(a=0),w.eq(a).addClass("on").siblings().removeClass("on")},c.addNpBtn&&(y=a("<a class='prev' href='javascript:;'>上一个</a>").appendTo(c.slide),z=a("<a class='next' href='javascript:;'>下一个</a>").appendTo(c.slide)),c.hover&&c.slide.hover(function(){c.slideBox.fadeIn(0)},function(){c.slideBox.fadeOut(0),w.removeClass("on")}),1==o?!1:(A=function(){for(var a=0;n>a;a++)d.append(e.eq(a).clone());m?d.stop(!1,!0).animate({left:-q*o},c.effect.last,function(){d.css("left","0");for(var a=0;n>a;a++)d.children().last().remove()}):d.stop(!1,!0).animate({top:-q*o},c.effect.last,function(){d.css("top","0");for(var a=0;n>a;a++)d.children().last().remove()}),x(0)},B=function(){var a;if(m){for(d.css("left",1*-q),a=0;n>a;a++)d.prepend(d.children().last());d.stop(!1,!1).animate({left:0},c.effect.last,function(){d.css("left",-q*(o-1));for(var a=0;n>a;a++)d.append(d.children().first())})}else{for(d.css("top",1*-q),a=0;n>a;a++)d.prepend(d.children().last());d.stop(!1,!1).animate({top:0},c.effect.last,function(){d.css("top",-q*(o-1));for(var a=0;n>a;a++)d.append(d.children().first())})}x(o-1)},C=function(b){var f,g;if(x(b),c.lazyLoad)for(f=0;n>f;f++)g=e.eq(b*n+f).find("img"),g.each(function(){var b,c;a(this).attr("src")!=a(this).attr("url")&&(b=a(this),c=new Image,c.readyState?c.onreadystatechange=function(){("loaded"==c.readyState||"complete"==c.readyState)&&(c.onreadystatechange=null,b.attr("src",b.attr("url")))}:c.onload=function(){b.attr("src",b.attr("url"))},c.src=b.attr("url"))});if("none"!=c.effect.type)if("fade"!=c.effect.type)b==o?A():-1==b?B():m?d.stop(!1,!0).animate({left:-q*b},c.effect.last):d.stop(!1,!0).animate({top:-q*b},c.effect.last);else for(b==o&&(b=0),-1==b&&(b=o-1),e.css("display","none"),f=0;n>f;f++)e.eq(b*n+f).fadeTo(0,.2,function(){a(this).fadeTo(c.effect.last,1)});else for(b==o&&(b=0),-1==b&&(b=o-1),e.css("display","none"),f=0;n>f;f++)e.eq(b*n+f)[c.effect.effect](c.effect.last)},c.lazyLoad&&C(0),w[c.switcher.event](function(){g=a(this).index(),C(g)}),c.autoPlay.bool&&c.slide.hover(function(){clearInterval(h)},function(){h=setInterval(function(){"left"==c.direction||"up"==c.direction?(g++,C(g),g==o&&(g=0)):(g--,C(g),-1==g&&(g=o-1))},c.autoPlay.offset)}).trigger("mouseleave"),z&&z.click(function(){"fade"==c.effect.type&&c.smooth&&e.is(":animated")||c.smooth&&d.is(":animated")||(g++,C(g),g==o&&(g=0))}),y&&y.click(function(){"fade"==c.effect.type&&c.smooth&&e.is(":animated")||c.smooth&&d.is(":animated")||(g--,C(g),-1==g&&(g=o-1))}),void 0)}}(jQuery);
